         nam
         ttl   os9 system module    * Disassembled 2014/11/15 21:19:47 by Disasm v1.5 (C) 1988 by RMLLevel    equ   2
         ifp1         use   /dd/defs/os9defs         endctylg     set   Systm+Objct   atrv     set   ReEnt+revrev      set   $02         mod   eom,name,tylg,atrv,start,sizeu0000    rmb   2u0002    rmb   2u0004    rmb   2u0006    rmb   2u0008    rmb   1u0009    rmb   4size     equ   .name     equ   *         fcs   /Boot/
         fcb   $05 start    ldb   #$0Dlp       dec   <D.Crash+5         sbcb  -u0006,u         bne   lp         tfr   s,u         ldx   #$FF48         lda   #$D0            force interrupt (stops any command in progress         sta   ,x         lbsr  L0186           delay         lda   ,x         lda   #$FF         sta   u0004,u         leax  L0112,pc        point to NMI routine         stx   <D.NMI         lda   #$09         sta   >$FF40*         ldw   #$8F3AL003C    mul            decw           bne   L003C         pshs  u,y,x,b,a         ldd   #$0001         os9   F$SRqMem          bcs   L00AC         tfr   u,d         ldu   $06,s         std   u0002,u         tfr   0,x         bsr   L00C8         bcs   L00AC         lda   #$30         jsr   <D.BtBug         ldy   u0002,u         lda   <$10,y         anda  #$01         sta   u0008,u         lda   $03,y         sta   u0006,u         ldd   <$18,y         std   ,s         ldx   <$16,y         pshs  x         ldd   #$0100         ldu   u0002,u         os9   F$SRtMem          ldd   $02,s         os9   F$BtMem          puls  x         bcs   L00AC         stu   $02,s         ldu   $06,s         ldd   $02,s         std   u0002,u         ldd   ,s         beq   L00A5L0090    pshs  x,b,a         bsr   L00C8         bcs   L00AA         lda   #$2E         jsr   <D.BtBug         puls  x,b,a         inc   u0002,u         leax  $01,x         subd  #$0100         bhi   L0090L00A5    clrb           puls  b,a         bra   L00AEL00AA    leas  $04,sL00AC    leas  $02,sL00AE    sta   >$FFD9         puls  u,y,x         leas  $0A,s         clr   >$FF40L00B8    rts   L00B9    lda   #$09         sta   ,u         clr   u0004,u         lda   #$05         lbsr  L0151         clrb           lbra  L0170L00C8    lda   #$91         bra   L00D2+1L00CC    bcc   L00D2+1         pshs  x,b,a         bsr   L00B9L00D2    cmpx  #$3416         bsr   L00DE         puls  x,b,a         bcc   L00B8         lsra           bne   L00CCL00DE    bsr   L011F         bcs   L00B8         ldx   u0002,u         orcc  #$50         ldy   #$FFFF         ldb   #$80         stb   >$FF48         ldb   ,u         orb   #$30         tst   u0009,u         beq   L00F9         orb   #$40L00F9    stb   >$FF40         lbsr  L0186         orb   #$80         lda   #$02         stb   >$FF40         nop            nop            bra   L010AL010A    lda   >$FF4B         sta   ,x+         nop            bra   L010A* NMI RoutineL0112    leas  $0E,s         ldb   >$FF48         bitb  #$9C         beq   L016E         comb           ldb   #$F4         rts   L011F    lda   #$09         sta   ,u         clr   u0009,u         tfr   x,d         tstd           beq   L014D         clr   ,-s         tst   u0008,u         beq   L0143         bra   L0139L0133    com   u0009,u         bne   L0139         inc   ,sL0139    subb  u0006,u         sbca  #$00         bcc   L0133         bra   L0149L0141    inc   ,sL0143    subb  u0006,u         sbca  #$00         bcc   L0141L0149    addb  u0006,u         puls  aL014D    incb           stb   >$FF4AL0151    ldb   u0004,u         stb   >$FF49         cmpa  u0004,u         beq   L016E         sta   u0004,u         sta   >$FF4B         ldb   #$10         bsr   L0170         pshs  x         ldx   #$222EL0168    leax  -$01,x         bne   L0168         puls  xL016E    clrb           rts   L0170    bsr   L0183L0172    ldb   >$FF48         bitb  #$01         bne   L0172         rts   L017A    lda   ,u         sta   >$FF40         stb   >$FF48         rts   L0183    nop            bsr   L017A* delaysL0186    nop            nop            lbsr  L018BL018B    nop            nop            lbsr  L0190L0190    nop            rts            fcc   /If this doesn’t work, I’m REALLY going to be mad!/         rts            rts            rts            rts            rts            rts            rts            rts            rts            rts
         rts
         rts         emodeom      equ   *         end