         nam   IOMan         ttl   os9 system module    * Disassembled 2014/11/07 08:16:33 by Disasm v1.5 (C) 1988 by RMLLevel    equ   2
H6309    equ   1
         ifp1         use   /dd/defs/os9defs         endctylg     set   Systm+Objct   atrv     set   ReEnt+revrev      set   $01         mod   eom,name,tylg,atrv,start,sizeu0000    rmb   0size     equ   .name     equ   *         fcs   /IOMan/         fcb   $0C start    equ   *         ldx   <D.Init        get pointer to init module         lda   DevCnt,x       get # entries in dev table         ldb   #DEVSIZ        get size of entry         mul                  calculate size         pshs  d              preserve it         lda   PollCnt,x      get number of entries in polling table         ldb   #POLSIZ        get size of entry         mul                  calculate size         pshs  d              preserve it         asld                 multiply by 2         addd  2,s            add to size of device table         os9   F$SRqMem       allocate memory         lbcs  L008D         leax  ,u             point to memory         leay  >L00D8,pc      point to a zero         tfr   d,w         tfm   y,x+           clear memory         stu   <D.DevTbl      save pointer to device table         puls  x,d            get pointer to device table & size         addr  u,x         stx   <D.PolTbl      save end of device table         addr  d,x         stx   <D.CLTb         ldx   <D.PathDBT         os9   F$All64          bcs   L008D         stx   <D.PathDBT         os9   F$Ret64          leax  >L077D,pc         stx   <D.Poll* 
         ldq   >$0350         stq   >$0670         leay  <L008F,pc         os9   F$SSvc          leau  >L006F,pc         stu   <D.SysVec         clrb           rts   L006F    lda   >$0642         bne   L008B         lda   >$0643         pshs  a         jsr   ,x         puls  a         sta   >$0643         sta   >$FFA1         inca           sta   >$0645         sta   >$FFA2         rts   L008B    jmp   ,xL008D    jmp   <u006BL008F    clr   >$0115         oim   #$07,<u0073         cmpa  #$07         jsr   <u000F         rol   <u0062         adda  $09,x         sta   [>$010B]         ora   $06,x         clra           subd  >$000D         brn   L00B0         bls   L00CD         asr   <u0001         eora  $00,x         rola  L00B0    adca  $00,x         ora   #$80* check device status service call?         ldx   $06,u         ldu   <u0024         ldb   $0D,u         ldu   <u0080L00BC    ldy   $04,u         beq   L00CD         cmpx  $04,u         beq   L00D4         cmpx  ,u         beq   L00D4         cmpx  $06,u         beq   L00D4L00CD    leau  $0D,u         decb           bne   L00BC         clrb           rts   L00D4    comb           ldb   #$D1         rts   L00D8    neg   <u0034         lsl   >$1038         pshs  b,a,cc         leau  ,s         ldd   $01,u         addd  #$00FF         clrb           std   $01,u         bsr   L0100L00EB    tfr   cc,a         bcc   L00F1         stb   $02,sL00F1    sta   ,s         puls  b,a,cc         pulsw          puls  pc,u,y,x,dp         ldx   $0C,u         cmpx  #$6000         bhi   L010FL0100    ldx   #$2000         leay  <$40,x         leax  a,xL0108    ldb   $01,u         cmpr  x,y         bhi   L0113L010F    jmp   [>$0670]L0113    lda   ,-y         bne   L0108         decb           bne   L0113         tfr   y,d         addr  b,a         clrb           std   $0A,u         ldb   $01,u         lda   #$01L0126    sta   ,y+         decb           bne   L0126L012B    clrb           rts   L012D    comb           ldb   #$D2         rts   L0131    pshs  u,y,x,dp         pshsw          pshs  b,a,cc         leau  ,s         bsr   L013D         bra   L00EBL013D    ldd   $01,u         beq   L012B         addd  #$00FF         ldb   $0B,u         bne   L012D         ldb   $0A,u         cmpb  #$20         beq   L012D         cmpb  #$60         bcs   L0156         jmp   [>$0672]L0156    subb  #$20         ldx   #$2000         abx   L015C    clr   ,x+         deca           bne   L015C         clrb           rts            neg   <u005A         aim   #$14,<u0002         orb   $03,x         brn   L016F         brn   L0171         rolb  L016F    com   <u0076L0171    com   <u00AC         lsr   <u003C         lsr   <u0058         lsr   <u005D         lsr   <u0058         lsr   <u005D         eim   #$06,<u0004         cwai  #$05         rol   $03,x         sbca  >$0038         oim   #$F2,<u0002         stu   <u0003         nop            com   <u0012         com   <u0037         com   <u0054         com   <u008A         lsr   <u001F         lsr   <u0062         lsr   <u0040         lsr   <u0062         lsr   <u0040         lsr   <u00EC         lsr   <u001F         eim   #$57,<u0003         suba  <u0030         cmpx  #$B920         com   <u0030         cmpx  #$D6C1         bra   L01D4         ror   <u0010         lda   b,x         lsrb           jmp   w,x         comb           ldb   #$D0         rts            ldw   #$001B         leas  <-$1B,s         leax  >L00D8,pcr         tfr   s,y         tfm   x,y+         stu   <$19,s         lda   $01,u         sta   $0D,sL01D4    ldx   <u0050         stx   <$17,s         leay  <$40,x         ldx   <u004A         stx   <u0050         ldx   $06,u         lda   #$F0         os9   Link F$B          bcs   L021B         stu   $04,s         ldy   <$19,s         stx   $06,y         leax  ,u         lbsr  L035A         lda   $0E,u         sta   $0E,s         ldd   $0F,u         std   $0F,s         ldx   $0B,u         addr  u,x         lda   #$E0         os9   F$Link            bcs   L021B         stu   ,s         sty   $09,s         ldu   $04,s         ldx   $09,u         addr  u,x         lda   #$D0         os9   F$Link   L021B    ldx   <$17,s         stx   <u0050         bcc   L0230L0222    stb   <$1A,s         leau  ,s         os9   I$Detach          leas  <$1A,s         comb           puls  pc,bL0230    stu   $06,s         sty   $0B,s         ldx   <u0024         ldb   $0D,x         tfr   b,f         ldu   <u0080L023D    ldx   $04,u         beq   L027A         cmpx  $04,s         bne   L025C         ldx   $02,u         bne   L0257         lde   $08,u         beq   L023D         pshs  u,b         lbsr  L0A48         puls  u,b         bra   L023DL0257    stu   <$11,s         ldx   $04,uL025C    ldy   $0F,x         cmpy  $0F,s         bne   L027A         lde   $0E,x         cmpe  $0E,s         bne   L027A         ldx   ,u         cmpx  ,s         bne   L027A         ldx   $02,u         stx   $02,s         tst   $08,u         beq   L027AL027A    leau  $0D,u         decb           bne   L023D         ldu   <$11,s         lbne  L0332         ldu   <u0080         tfr   f,aL028A    ldx   $04,u         beq   L02A4         leau  $0D,u         deca           bne   L028A         ldb   #$CC         lbra  L0222L0298    lsrd           lsrd           lsrd           lsrd           lsrd           clra           rts   L02A4    ldx   $04,s         lbsr  L035A         ldx   $02,s         lbne  L0327         stu   <$11,s         ldx   ,s         ldd   $0B,x         lbsr  L00D9         lbcs  L0222         stu   $02,s         leay  $03,s         tfr   d,w         tfm   y,u+         ldd   $0E,s         bsr   L0298         std   <$15,s         ldu   #$0000         tfr   u,y         stu   <$13,s         ldx   <u004CL02D7    ldd   ,x++         cmpd  <$15,s         beq   L0309         cmpd  #$333E         bne   L02EB         sty   <$13,s         leau  -$02,xL02EB    leay  >$2000,y         bne   L02D7         ldb   #$ED         cmpr  0,u         lbeq  L0222         ldd   <$15,s         std   ,u         ldx   <u004A         oim   #$10,$0C,x         os9   F$ID              bra   L030DL0309    sty   <$13,sL030D    ldd   $0F,s         anda  #$1F         addd  <$13,s         ldu   $02,s         clr   ,u         std   $01,u         ldy   $04,s         jsr   [<$09,s]         lbcs  L0222         ldu   <$11,sL0327    ldw   #$000D         tfr   s,x         tfm   x+,u+         leau  -$0D,uL0332    ldx   $04,u         lbsr  L035A         ldb   $07,x         lda   $0D,s         anda  $0D,x         ldx   ,u         anda  $0D,x         cmpa  $0D,s         beq   L034A         ldb   #$CB         lbra  L0222L034A    inc   $08,u         bne   L0350         dec   $08,uL0350    ldx   <$19,s         stu   $0A,x         leas  <$1B,s         clrb           rts   L035A    pshs  x,cc         lda   <$12,x         anda  #$01         ldx   #$0660         lda   a,x         orcc  #$50         sta   >$0643         sta   >$FFA1         inca           sta   >$0645         sta   >$FFA2         puls  pc,x,cc         ldu   $0A,u         ldx   $04,u         bsr   L035A         ldb   $08,u         bne   L038A         pshs  u,b         ldu   $02,u         bne   L03CC         clrb           puls  pc,u,aL038A    lda   #$FF         cmpa  $08,u         lbeq  L0448         dec   $08,u         lbne  L042C         ldx   <u0024         ldb   $0D,x         pshs  u,b         ldx   $02,u         ldw   ,u         clr   $02,u         clr   $03,u         ldy   <u0080L03AA    cmpw  ,y         bne   L03B3         cmpx  $02,y         beq   L0422L03B3    leay  $0D,y         decb           bne   L03AA         ldy   <u0050         ldb   ,y         stb   $08,u         ldy   $04,u         ldu   $09,u         exg   x,u         pshs  u         jsr   $0F,x         puls  uL03CC    ldx   $01,s         ldx   ,x         ldd   $0B,x         lbsr  L0131         ldx   $01,s         ldx   $04,x         ldd   $0E,x         beq   L0422         lbsr  L0298         cmpb  #$3F         beq   L0422         tfr   d,y         ldf   ,s         ldu   <u0080L03EB    cmpu  $01,s         beq   L0400         ldx   $04,u         beq   L0400         ldd   $0E,x         beq   L0400         lbsr  L0298         cmpr  y,d         beq   L0422L0400    leau  $0D,u         decf           bne   L03EB         ldx   <u004A         ldu   <u004C         ldf   #$08L040D    ldd   ,u++         cmpr  y,d         beq   L041A         decf           bne   L040D         bra   L0422L041A    ldd   #$333E         std   -$02,u         oim   #$10,$0C,xL0422    puls  u,b         ldx   $04,u         clr   $04,u         clr   $05,u         clr   $08,uL042C    ldw   <u0050         ldd   <u004A         std   <u0050         ldy   ,u         ldu   $06,u         os9   F$UnLink          leau  ,y         os9   F$UnLink          leau  ,x         os9   F$UnLink          stw   <u0050L0448    lbsr  L06A2         clrb           rts            bsr   L046E         bcs   L046D         pshs  x,a         lda   $01,u         lda   a,x         bsr   L0466         bcs   L0462         puls  x,b         stb   $01,u         sta   b,x         rts   L0462    puls  pc,x,aL0464    lda   $01,uL0466    lbsr  L05CD         bcs   L046D         inc   $02,yL046D    rts   L046E    ldx   <u0050         leax  <$30,x         clra  L0474    tst   a,x         beq   L0481         inca           cmpa  #$10         bcs   L0474         comb           ldb   #$C8         rts   L0481    andcc #$FE         rts            bsr   L046E         bcs   L0496         pshs  u,x,a         bsr   L0497         puls  u,x,a         bcs   L0496         ldb   $01,u         stb   a,x         sta   $01,uL0496    rts   L0497    pshs  b         ldb   $01,u         lbsr  L051D         bcs   L04BA         puls  b         lbsr  L0624         bcc   L04B5         bsr   L04C9         cmpb  #$C7         beq   L04AF         coma           rts   L04AF    bsr   L0464         bcs   L04B4         clrb  L04B4    rts   L04B5    lda   ,y         sta   $01,u         rts   L04BA    puls  pc,a         pshs  b         ldb   #$82L04C0    bsr   L051D         bcs   L04BA         puls  b         lbsr  L0624L04C9    pshs  u,b,cc         ldu   $03,y         os9   I$Detach          lda   ,y         ldx   <u0088         os9   et64 F$S          puls  pc,u,b,cc         pshs  b         ldb   $01,u         orb   #$80         bsr   L051D         bcs   L04BA         puls  b         lbsr  L0624         bcs   L04C9         ldu   <u0050         tim   #$1B,$01,y         beq   L04FC         ldx   $03,y         stx   <$20,u         inc   $08,x         bne   L04FC         dec   $08,xL04FC    tim   #$24,$01,y         beq   L050C         ldx   $03,y         stx   <$26,u         inc   $08,x         bne   L050C         dec   $08,xL050C    clrb           bra   L04C9         pshs  b         ldb   #$02         bra   L04C0         ldb   #$07         pshs  b         ldb   $01,u         bra   L04C0L051D    ldx   <u0050         pshs  u,x         ldx   <u0088         os9   ll64 F$R          bcs   L058A         inc   $02,y         stb   $01,y         ldx   <u0050         ldb   $06,x         ldx   $06,uL0532    os9   DABX F$S          leax  $01,x         cmpa  #$20         beq   L0532         leax  -$01,x         stx   $06,u         cmpa  #$2F         beq   L055F         ldx   <u0050         tim   #$04,$01,y         beq   L054F         ldx   <$26,x         bra   L0552L054F    ldx   <$20,xL0552    beq   L058F         ldd   <u004A         std   <u0050         ldx   $04,x         ldd   $04,x         addr  d,xL055F    pshs  y         os9   F$PrsNam          puls  y         bcs   L058F         lda   $01,y         os9   I$Attach          stu   $03,y         bcs   L0591         ldx   $04,u         leax  <$11,x         ldf   ,x+         leau  <$20,y         cmpf  #$20         bcs   L0584         ldf   #$20L0584    clre           tfm   x+,u+         clrb  L058A    puls  u,x         stx   <u0050         rts   L058F    ldb   #$D7L0591    pshs  b         lda   ,y         ldx   <u0088         os9   et64 F$S          puls  b         coma           bra   L058A         bsr   L05D5         bcc   L05A6         rts            lda   $01,uL05A6    bsr   L05CD         bcc   L0624         rts   L05AB    ldb   #$F4         tim   #$02,,s         beq   L05B8         ldb   #$F5         bra   L05B8L05B6    ldb   #$CBL05B8    com   ,s+         rts            bsr   L05D5         bcc   L05E9         rts            bsr   L05D5         bcc   L05C7         rts            lda   $01,uL05C7    pshs  b         ldb   #$02         bra   L05EDL05CD    ldx   <u0088         os9   ind64F$A          bcs   L05E3         rts   L05D5    lda   $01,u         cmpa  #$10         bcc   L05E3         ldx   <u0050         adda  #$30         lda   a,x         bne   L05E6L05E3    comb           ldb   #$C9L05E6    rts            lda   $01,uL05E9    pshs  b         ldb   #$05L05ED    bsr   L05CD         bcs   L05B8         bitb  $01,y         beq   L05B6         ldd   $08,u         beq   L0622         addd  $06,u         bcs   L05AB         decd           lsra           lsra           lsra           lsra           lsra           ldb   $06,u         lsrb           lsrb           lsrb           lsrb           ldx   <u0050         leax  <$40,x         abx            lsrb           subr  b,a         tfr   a,eL0616    ldd   ,x++         cmpd  #$333E         beq   L05AB         dece           bpl   L0616L0622    puls  bL0624    subb  #$03         pshs  u,y,x         ldx   <u0050L062A    lde   $05,y         bne   L0658         lda   ,x         sta   $05,y         stu   $06,y         ldx   $03,y         ldx   $04,x         lbsr  L035A         ldx   $03,y         ldx   $0B,x         abx            abx            abx            jsr   ,xL0645    pshs  b,cc         bsr   L06A2         ldy   $04,s         ldx   <u0050         lda   ,x         cmpa  $05,y         bne   L0656         clr   $05,yL0656    puls  pc,u,y,x,b,ccL0658    pshs  u,y,x,b         lbsr  L0A48         puls  u,y,x,b         coma           lda   <$19,x         beq   L062A         tfr   a,b         bra   L0645         lbsr  L05D5         ldx   <u0050         bcc   L0675         rts            lda   $01,u         ldx   <u004AL0675    pshs  x,b,a         lda   $02,u         sta   $01,s         puls  a         lbsr  L05A6         puls  x,a         pshs  u,y,b,cc         tsta           beq   L068D         cmpa  #$0E         beq   L06BC         puls  pc,u,y,b,ccL068D    lda   <u00D0         ldb   $06,x         leax  <$20,yL0694    ldy   #$0020         ldu   $06,u         os9   ove  F$A          leas  $02,s         clrb           puls  pc,u,yL06A2    pshs  y         ldy   <u0050         lda   <$10,y         beq   L06B9         clr   <$10,y         ldb   #$01         os9   F$Send            os9   ProcPF$M          clr   $0F,yL06B9    clrb           puls  pc,yL06BC    lda   <u00D0         ldb   $06,x         ldx   $03,y         ldx   $04,x         ldw   $04,x         addr  w,x         bra   L0694         lbsr  L05D5         bcs   L06DB         lde   $01,u         adde  #$30         clr   e,x         bra   L06DEL06DB    rts            lda   $01,uL06DE    lbsr  L05CD         bcs   L06DB         dec   $02,y         tst   $05,y         bne   L06EC         lbsr  L0624L06EC    tst   $02,y         bne   L06DB         lbra  L04C9         ldx   $06,u         ldb   ,x         ldx   $01,x         clra           pshs  cc         pshs  x,b         ldx   <u0024         ldb   $0C,x         ldx   <u0082         ldy   $06,u         beq   L0749         tst   $01,s         beq   L0777         decb           lda   #$0B         mul            addr  d,x         lda   $03,x         bne   L0777         orcc  #$50L071A    ldb   $02,s         cmpb  -$01,x         bcs   L072D         ldb   #$0BL0722    lda   ,-x         sta   $0B,x         decb           bne   L0722         cmpx  <u0082         bhi   L071AL072D    ldd   $01,u         std   ,x         ldd   ,s++         std   $02,x         ldb   ,s+         stb   $08,x         ldq   $08,u         stq   $04,x         lda   >$0643         ldb   >$0645         std   $09,x         puls  pc,ccL0749    leas  $04,s         ldy   $0A,uL074E    cmpy  $06,x         beq   L075A         leax  $0B,x         decb           bne   L074E         clrb           rts   L075A    orcc  #$50         decb           beq   L0769         lda   #$0B         mul            tfr   d,w         leay  $0B,x         tfm   y+,x+L0769    ldw   #$000B         clr   ,-s         tfm   s,x+         leas  $01,s         andcc #$AF         rts   L0777    leas  $04,sL0779    comb           ldb   #$CA         rts   L077D    ldy   <u0082         ldx   <u0024         lde   $0C,xL0785    ldd   $09,y         beq   L0792         std   >$FFA1         sta   >$0643         stb   >$0645L0792    lda   [,y]         eora  $02,y         bita  $03,y         bne   L07A2L079A    leay  $0B,y         dece           bne   L0785         bra   L0779L07A2    ldu   $06,y         pshs  y,b         jsr   [<$04,y]         puls  y,b         bcs   L079A         rts            pshs  u         ldx   $06,u         lbsr  L084F         bcs   L0806         ldy   ,s         stx   $06,y         ldy   ,u         ldx   $04,u         ldd   #$0006         os9   DDDXYF$L          leay  ,u         puls  u         bra   L07E3         ldx   <u0050         leay  <$40,x         pshs  u         ldx   $06,u         lda   $01,u         os9   ModulF$M          bcs   L0806         leay  ,u         puls  u         stx   $06,uL07E3    std   $01,u         ldx   $06,y         beq   L07ED         bitb  #$80         beq   L0803L07ED    leax  $01,x         beq   L07F3         stx   $06,yL07F3    ldx   $04,y         ldy   ,y         ldd   #$000B         os9   DDDXYF$L          bcs   L0802         std   $08,uL0802    rts   L0803    comb           ldb   #$D1L0806    puls  pc,u         pshs  u         ldx   $06,u         bsr   L084F         bcs   L0833         puls  yL0812    pshs  y         stx   $06,y         ldy   ,u         ldx   $04,u         ldd   #$0006         os9   DDDXYF$L          ldx   ,s         std   $01,x         leax  ,u         os9   Link F$F          bcs   L0833         ldx   ,s         sty   $08,x         stu   $0A,xL0833    puls  pc,u         pshs  u         ldx   $06,u         bsr   L084F         bcs   L084D         puls  y         ldd   <u0050         pshs  y,b,a         ldd   $0A,y         std   <u0050         bsr   L0812         puls  x         stx   <u0050L084D    puls  pc,uL084F    os9   llPrcF$D          bcc   L0855         rts   L0855    leay  ,u         tfr   0,u         pshs  u,y,x,b,a         leas  <-$11,s         clr   $07,s         stu   ,s         stu   $02,s         ldu   <u0050         stu   $04,s         clr   $06,s         lda   $0A,u         sta   $0A,y         sta   $0B,y         lda   #$04         os9   I$Open            lbcs  L0904         sta   $06,s         stx   <$13,s         ldx   <$15,s         os9   llTskF$D          bcs   L0904         stx   <u0050L0888    ldx   <$15,s         lda   $0A,x         adda  #$08         bcc   L0893         lda   #$FFL0893    sta   $0A,x         sta   $0B,x         ldd   #$0009         ldx   $02,s         lbsr  L0988         bcs   L0904         ldu   <$15,s         lda   $06,u         ldb   <u00D0         leau  $08,s         pshs  x         ldx   $04,s         os9   ove  F$A          puls  x         ldd   ,u         cmpd  #$87CD         bne   L0902         ldd   $02,u         subd  #$0009         lbsr  L0988         bcs   L0904         ldx   $04,s         lda   $0A,x         ldy   <$15,s         sta   $0A,y         sta   $0B,y         leay  <$40,y         tfr   y,d         ldx   $02,s         os9   ModulF$F          bcc   L08E3         cmpb  #$E7         beq   L08E9         bra   L0904L08E3    ldd   $02,s         addd  $0A,s         std   $02,sL08E9    ldd   <$17,s         bne   L0888         ldd   $04,u         std   <$11,s         ldd   [,u]         std   <$17,s         ldd   $06,u         incd           beq   L0888         std   $06,u         bra   L0888L0902    ldb   #$CDL0904    stb   $07,s         ldd   $04,s         beq   L090C         std   <u0050L090C    lda   $06,s         beq   L0913         os9   I$Close  L0913    ldd   $02,s         addd  #$1FFF         lsra           lsra           lsra           lsra           lsra           sta   $02,s         ldb   ,s         beq   L0940         lsrb           lsrb           lsrb           lsrb           lsrb           subb  $02,s         beq   L0940         ldx   <$15,s         leax  <$40,x         lsla           leax  a,x         leax  $01,x         ldu   <u0040L0939    lda   ,x++         clr   a,u         decb           bne   L0939L0940    ldx   <$15,s         lda   ,x         os9   elPrcF$E          ldd   <$17,s         bne   L0955         ldb   $07,s         stb   <$12,s         comb           bra   L0983L0955    ldu   <u0044         ldx   <$11,s         ldd   <$17,s         leau  -$08,uL095F    leau  $08,u         cmpu  <u0058         bcs   L096E         comb           ldb   #$DD         stb   <$12,s         bra   L0983L096E    cmpx  $04,u         bne   L095F         cmpd  [,u]         bne   L095F         ldd   $06,u         beq   L097F         decd           std   $06,uL097F    stu   <$17,s         clrb  L0983    leas  <$11,s         puls  pc,u,y,x,b,aL0988    pshs  y,x,b,a         addd  $02,s         std   $04,s         cmpd  $08,s         bls   L09E4         addd  #$1FFF         lsra           lsra           lsra           lsra           lsra           cmpa  #$07         bhi   L09C6         ldb   $08,s         lsrb           lsrb           lsrb           lsrb           lsrb           subr  b,a         lslb           exg   b,a         ldu   <$1D,s         leau  <$40,u         leau  a,u         clra           tfr   b,f         ldy   <u0040         clrb  L09BB    tst   ,y+         beq   L09CBL09BF    incd           cmpy  <u0042         bne   L09BBL09C6    comb           ldb   #$CF         bra   L09EEL09CB    inc   -$01,y         std   ,u++         lde   $08,s         adde  #$20         ste   $08,s         decf           bne   L09BF         ldx   <$1D,s         os9   etTskF$R          bcs   L09EEL09E4    lda   $0E,s         ldx   $02,s         ldy   ,s         os9   I$Read   L09EE    leas  $04,s         puls  pc,xL09F2    fcb   $45 E         fcb   $52 R         fcb   $52 R         clra           fcb   $52 R         bra   L0A1C         ble   L0A35         leax  $0D,x         ldx   <u0050         lda   <$32,x         beq   L0A44         leas  -$0B,s         leax  <L09F2,pcr         leay  ,sL0A0B    lda   ,x+         sta   ,y+         cmpa  #$0D         bne   L0A0B         ldb   $02,uL0A15    inc   $07,s         subb  #$64         bcc   L0A15L0A1B    dec   $08,s         addb  #$0A         bcc   L0A1B         addb  #$30         stb   $09,s         ldx   <u0050         ldu   $04,x         leau  -$0B,u         lda   <u00D0         ldb   $06,x         leax  ,s         ldy   #$000BL0A35    os9   ove  F$A          leax  ,u         ldu   <u0050         lda   <$32,u         os9   I$WritLn          leas  $0B,sL0A44    rts            lde   $01,uL0A48    ldy   <u0050         clrf  L0A4D    lda   <$10,y         beq   L0A71         cmpr  e,a         bne   L0A6C         stf   <$10,y         os9   ProcPF$M          bcs   L0AD3         stf   $0F,y         ldb   #$01         os9   F$Send            ldu   <u0050         bra   L0A7AL0A6C    os9   ProcPF$M          bcc   L0A4DL0A71    tfr   e,a         ldu   <u0050         os9   ProcPF$M          bcs   L0AD3L0A7A    leax  ,y         lda   <$10,y         beq   L0A9C         os9   ProcPF$M          bcs   L0AD3         ldb   $0B,u         cmpb  $0B,y         bls   L0A7A         ldb   ,u         stb   <$10,x         ldb   ,x         stb   $0F,u         stf   $0F,y         exg   y,u         bra   L0A7AL0A9C    lda   ,u         sta   <$10,y         lda   ,y         sta   $0F,u         ldx   #$0000         os9   F$Sleep           ldu   <u0050         lda   $0F,u         beq   L0AD3         os9   ProcPF$M          bcs   L0AD0         lda   <$10,y         beq   L0AD0         lda   <$10,u         sta   <$10,y         beq   L0AD0         stf   <$10,u         os9   ProcPF$M          bcs   L0AD0         lda   $0F,u         sta   $0F,yL0AD0    stf   $0F,uL0AD3    rts            emodeom      equ   *         end