         nam   OS9p1         ttl   os9 system module    * Disassembled 2014/11/20 19:45:13 by Disasm v1.5 (C) 1988 by RML         ifp1         use   /dd/defs/os9defs         endctylg     set   Systm+$00atrv     set   ReEnt+revrev      set   $06         mod   eom,name,tylg,atrv,start,sizeu0000    rmb   0size     equ   .name     equ   *         fcs   /OS9p1/         fcb   $13          fcc   /0123456789ABCDEF/         fcc   /0123456789ABCDEF/         fcc   /0123456789ABCDEF/         fcc   /0123456789/L0049    fcb   $FC          fcb   $AD -         fcb   $F2 r         fcb   $40 @         fcb   $F2 r         fcb   $4E N         fcb   $00          fcb   $6B k         fcb   $FD          fcb   $0C          fcb   $F2 r         fcb   $43 C         fcb   $00          fcb   $6B k         fcb   $00          fcb   $55 U         fcb   $F3 s         fcb   $09 L005B    aim   #$FE,<D.TINIT    map type 0
	 lde   <D.TINIT         another 2 bytes saved if GRFDRV does: tfr cc,e
	 ste   >DAT.Task        and we can use A here, instead of E
         clr   <D.SSTskN
         tfr   x,s
         tfr   a,cc
         rts	
L006C    jmp   [<-(D.SWI3-D.XSWI3),x]    (-$10) (Jmp to 2ndary vector)
start    ldq   #$01001F00         leay  <start+2,pc         tfm   y,d+         std   <D.CCStk         lda   #$01         std   <D.Tasks         addb  #$20         std   <D.TskIPt         clrb           inca           std   <D.BlkMap         addb  #$40         std   <D.BlkMap+2         clrb           inca           std   <D.SysDis         inca                   set user dispatch table to $0400
         std   <D.UsrDis
         inca                   set process descriptor block to $0500
         std   <D.PrcDBT
         inca                   set system process descriptor to $0600
         std   <D.SysPrc
         std   <D.Proc          set user process descriptor to $0600
         adda  #$02             set stack pointer to $0800
         tfr   d,s
         inca                   set system stack to $0900
         std   <D.SysStk
         std   <D.SysMem        set system memory map ptr $0900
         inca                   set module directory start to $0a00
         std   <D.ModDir
         std   <D.ModEnd        set module directory end to $0a00
         adda  #$06             set secondary module directory start to $1000
         std   <D.ModDir+2
         std   <D.ModDAT        set module directory DAT pointer to $1000
         std   <D.CCMem	set pointer to beginning of global memory to $1000
* In following line, CRC=ON if it is STA <D.CRC, CRC=OFF if it is a STB <D.CRC
         stb   <D.CRC           set CRC checking flag to off
		
* Initialize interrupt vector tables
         leay	<DisTable,pc    point to table of absolute vector addresses
         ldx	#D.Clock        where to put it in memory
         ldf   #$12             size of data         tfm   y+,x+            move it over         ldu   #$0160           somewhere in block 0 thatâ€™s never modified         stu   <D,Flip0         switch to system task 0         ldf   #$11             size of it         tfm   y+,u+            copy it over         tfr   y,u              move pointer to a faster registerL00CC    stu   ,x++             set all IRQ vectors to go to Vectors for now         cmpx  #D.NMI         bls   L00CC* Initialize user interrupt vectors         ldx   <u00E4         stx   <u00C6         ldx   <u00E8         stx   <u00CA         leax  >L02ED,pcr         stx   <u00C0         stx   <u00E4         leax  >L0E05,pcr         stx   <u00C4         stx   <u00E8         leax  >L0E01,pcr         stx   <u00CE         leax  >L053C,pcr         stx   <u0026         leax  >L01C3,pcr         stx   <u00B2         lda   #$31         jsr   <u005E         leax  >L0E5D,pcr         stx   <u00AB         leay  >L01D3,pcr         lbsr  L034D         ldu   <u0048         ldx   <u004A         stx   ,u         stx   $01,u         oim   #$01,,x         oim   #$80,$0C,x         clra           sta   <u00D0         sta   $06,x         coma           sta   $0D,x         dec   <u00A7         tim   #$30,<u0088         nega           stx   <u004C         clrd           std   ,x++         lda   #$06         ldu   #$333EL0135    stu   ,x++         deca           bne   L0135         ldu   #$003F         stu   ,x         ldx   <u0020         inc   ,x         inc   $01,x         ldx   <u004E         ldb   <u00A7L0149    inc   ,x+         decb           bne   L0149         ldx   <u0040         inc   <$3F,x         ldq   #$00080100L0158    asld           stb   >$FFA5         ste   >-$6000,x         cmpe  ,x         bne   L0158         stb   <u00A3         addr  x,d         std   <u0042         bitb  #$30         beq   L0181         tstb           beq   L0181         abx            leax  -$01,x         lda   #$80         subb  #$3FL017C    sta   ,x+         decb           bne   L017CL0181    ldx   #$ED00         lda   #$12         lbsr  L08E1         bsr   L01AFL018B    leax  <L01CB,pcr         bsr   L01C5         bcc   L0199         os9   oot  F$B          bcc   L018B         bra   L01ABL0199    stu   <u0024         lda   #$69         jsr   <u005EL019F    leax  <L01CF,pcr         bsr   L01C5         bcc   L01AD         os9   oot  F$B          bcc   L019FL01AB    jmp   <u006BL01AD    jmp   ,yL01AF    ldx   <u004E         ldd   #$80ED         abx            comb           sta   b,x         lda   #$01L01BA    sta   ,x+         decb           bne   L01BA         ldx   <u0040         sta   <$3F,x         rts   L01C5    lda   #$C0         os9   F$Link            rts   L01CB    rola           jmp   $09,s         andb  >$4F53         rts            neg   >$B200         oim   #$8B,<u0010         eim   #$06,<u0011         eim   #$93,<u0091         eim   #$9B,<u0017         lsr   <u0009         eora  $05,x         sbcb  >$A906         rora           cmpx  $0D,x         dec   <u00F9         jsr   $0B,x         eim   #$AE,>$022E         sbca  >$0142         anda  >$015D         bita  >$0690         lda   >$05DA         fcb   $1B          lsl   <u00F8         eora  >$0943         rts            asr   <u002A         ora   >$0791         cmpx  >$084E         jsr   >$0838         ldx   >$07EF         stx   >$0D0A         bge   L01D9         tst   <u000A         rts            cmpb  #$0D         dec   <u0046         sbcb  #$0D         dec   <u0064         addd  #$0D0A         clr   >$C408         fcb   $51 Q         ldb   #$08         asr   <$08,u         sbca  >$09DE,u         orb   #$09         ldb   >$CD01         bne   L0209         com   <u00F5         addd  <u0007         bcs   L0218         ror   <u00A0         fcb   $51 Q         asr   <u0036         suba  #$86         lbsr  L8ED1         sync           ldx   <u0050         ldu   a,x         beq   L025F         dec   <u0016         inc   <u0005         ldx   <u0050         ldu   <$15,x         bne   L0253         ldu   <u00C0L025F    stu   <u00E4         ldu   <u00C4         stu   <u00E8         oim   #$80,$0C,x         sts   $04,x         leas  >$01F2,x         leau  $0D,s         leay  -$01,y         ldw   #$000E         tfm   y-,u-         andcc #$AF         leau  ,s         ldx   $0C,u         leax  $01,x         stx   $0C,u         ldy   <u00C8         lbsr  L0313         aim   #$AF,,u         ldx   <u0050         aim   #$5F,$0C,x         lbsr  L0C63         lda   $0C,x         ora   <$19,x         sta   <u003E         beq   L02A3         bsr   L02C9         lbra  L0FADL02A3    ldb   #$0C         inc   >$021F         inc   >$27F4         ldw   #$000E         ldy   #$FEDF         orcc  #$50         tfm   u+,y+         lbra  L0DD9         pshs  u,y,x,cc         ldb   $06,x         ldx   $04,x         lbsr  L0BFE         leax  >-$6000,xL02C8    bra   L02D9         pshs  u,y,x,cc         ldb   $06,x         ldx   $04,x         lbsr  L0BFE         leax  >-$6000,xL02D7    exg   x,yL02D9    leau  a,u         lda   $01,u         ldb   $03,u         orcc  #$50         std   >$FFA5         ldw   #$000E         tfm   x+,y+         ldx   <u004CL02ED    lda   $0B,x         ldb   $0D,x         std   >$FFA5         puls  pc,u,y,x,cc         leau  ,s         lda   <u00A4         clr   <u00A4         pshs  a         lda   ,u         tfr   a,cc         ldx   $0C,u         leax  $01,x         stx   $0C,u         ldy   <u00C2         bsr   L0314         puls  a         lbra  L0E30         jmp   ,xL0314    lslb           bcc   L0335         ldx   >$00FE,yL031B    pshs  u         jsr   [>$00F0]         puls  uL0323    tfr   cc,a         bcc   L0329         stb   $02,uL0329    ldb   ,u         andd  #$2FD0         orr   b,a         sta   ,u         rts   L0335    clra           ldx   d,y         bne   L031B         comb           ldb   #$D0         bra   L0323         ldy   $08,u         bra   L0356L0344    clra           lslb           tfr   d,u         ldd   ,y++         leax  d,y         ldd   <u00C2         stx   d,u         bcs   L0356         ldd   <u00C8         stx   d,uL0356    ldb   ,y+         cmpb  #$80         bne   L0344         rts            ldy   $08,u         bra   L036F         pshs  u         ldb   $02,u         ldx   $06,u         bra   L0384         ldx   <u0050         leay  <$40,xL036F    pshs  u         ldx   $06,u         lda   $01,u         lbsr  L0648         bcs   L03F1         leay  ,u         ldu   ,s         stx   $06,u         std   $01,u         leax  ,yL0384    bitb  #$80         bne   L0390         ldd   $06,x         beq   L0390         ldb   #$D1         bra   L03F1L0390    ldd   $04,x         pshs  x,b,a         ldy   ,x         ldd   $02,x         addd  #$1FFF         tfr   a,b         lsrb           lsrb           lsrb           lsrb           lsrb           lsra           inca           lsra           lsra           lsra           lsra           pshs  a         leau  ,y         bsr   L03F5         bcc   L03BF         lda   ,s         lbsr  L0A18         bcc   L03BC         leas  $05,s         bra   L03F1L03BC    lbsr  L0A69L03BF    ldb   #$80         abx            sta   ,s         lsla           leau  a,x         ldd   ,u         incd           beq   L03CF         std   ,uL03CF    ldu   $03,s         ldd   $06,u         incd           beq   L03D9         std   $06,uL03D9    puls  u,y,x,b         lbsr  L0A88         stx   $0A,u         ldx   $04,y         ldy   ,y         ldd   #$0009         lbsr  L0AE1         addd  $0A,u         std   $08,u         clrb           rts   L03F1    orcc  #$01         puls  pc,uL03F5    ldx   <u0050         leay  <$40,x         clra           pshs  y,x,b,a         subb  #$08         negb           lslb           leay  b,yL0403    ldw   ,s         pshs  u,yL0408    ldd   ,y++         cmpd  ,u++         bne   L041D         decw           bne   L0408         puls  u,b,a         subd  $04,s         lsrb           stb   ,s         clrb           puls  pc,y,x,b,aL041D    puls  u,y         leay  -$02,y         cmpy  $04,s         bcc   L0403         puls  pc,y,x,b,a         pshs  u         ldx   $06,u         ldy   $01,u         bsr   L0437         ldx   ,s         stu   $0D,x         dec   <u0035L0437    subb  #$34         leax  -$09,x         oim   #$0C,<u0025         bvs   L040C         neg   <u0006         lbsr  L0AE2         andb  #$0F         pshs  b,a         ldd   #$0004         lbsr  L0AE2         leax  d,x         puls  a         lbsr  L0649         puls  a         bcs   L046A         andb  #$0F         subr  a,b         bcs   L046A         ldb   #$E7         cmpx  #$C6CE         orcc  #$01         puls  pc,y,xL046A    ldx   ,s         bsr   L04EC         bcs   L0464         sty   ,u         stx   $04,u         clrd           std   $06,u         ldd   #$0002         lbsr  L0AE2         addr  x,d         std   $02,u         ldy   [,u]         ldx   <u0044         pshs  u         cmpx  #$3008         cmpx  <u0058         bcc   L049D         cmpx  ,s         beq   L048C         cmpy  [,x]         bne   L048C         bsr   L04BCL049D    puls  u         ldx   <u0040         ldd   $02,u         addd  #$1FFF         lsra           lsra           lsra           lsra           lsra           ldy   ,u         tfr   a,eL04B0    ldd   ,y++         oim   #$02,d,x         dece           bne   L04B0         clrb           puls  pc,y,xL04BC    pshs  u,y,x,b,a         ldx   ,x         tfr   x,w         clrd  L04C4    ldy   ,w         beq   L04CD         std   ,w++         bra   L04C4L04CD    ldy   $02,s         ldu   ,u         puls  b,aL04D4    cmpx  ,y         bne   L04E3         stu   ,y         cmpd  $02,y         bcc   L04E1         ldd   $02,yL04E1    std   $02,yL04E3    leay  $08,y         cmpy  <u0058         bne   L04D4         puls  pc,u,y,xL04EC    pshs  u,y,x         ldd   #$0002         lbsr  L0AE2         addd  ,s         addd  #$1FFF         lsra           lsra           lsra           lsra           lsra           tfr   a,b         pshs  b         comb           lslb           sex            bsr   L0514         bcc   L0512         os9   CMDirF$A          tfr   0,u         stu   $05,s         bsr   L0514L0512    puls  pc,u,y,x,bL0514    ldx   <u005A         leax  d,x         cmpx  <u0058         bcs   L0546         ldu   $07,s         bne   L0532         ldy   <u0058         leay  $08,y         cmpr  x,y         bhi   L0546         sty   <u0058         leay  -$08,y         sty   $07,sL0532    stx   <u005A         ldd   $05,s         stx   $05,s         ldf   $02,s         clre           rolw           tfm   ??+,x+         stw   ,x         rts   L0546    orcc  #$01         rts            pshs  y,x         clrd           lbsr  L0AE2         cmpd  #$87CD         beq   L055A         ldb   #$CD         bra   L05B8L055A    leax  $02,x         lbsr  L0AD0         ldw   #$4A07L0563    lbsr  L0AB7         eorr  a,e         decf           bne   L0563         ince           beq   L0575         ldb   #$EC         bra   L05B8L0575    puls  y,x         lda   <u003B         bne   L057E         clrd           rts   L057E    ldd   #$0002         lbsr  L0AE2         tfr   d,w         pshs  y,x         ldd   #$FFFF         pshs  b,a         pshs  b         lbsr  L0AD0         leau  ,s         tstf  L0596    bne   L05A5         dec   <u0034         ldy   #$0001         os9   F$SPrior          dec   <u0035         fcb   $10          lbsr  L0AB9         bsr   L05BE         decw           bne   L0596         puls  x,b         cmpb  #$80         bne   L05B8         cmpx  #$0FE3         beq   L05BCL05B8    ldb   #$E8         orcc  #$01L05BC    puls  pc,y,xL05BE    eora  ,u         pshs  a         ldd   $01,u         std   ,u         clra           ldb   ,s         asld           eora  $01,u         std   $01,u         clrb           lda   ,s         lsrd           lsrd           eord  $01,u         std   $01,u         lda   ,s         lsla           eora  ,s         sta   ,s         lsla           lsla           eora  ,s         sta   ,s         lsla           lsla           lsla           lsla           eora  ,s+         bpl   L05F6         eim   #$80,,u         eim   #$21,$02,uL05F6    rts            ldd   $08,u         beq   L0635         ldx   $06,u         pshs  x,b,a         leas  -$03,s         ldx   <u0050         lda   $06,x         ldb   <u00D0         ldx   $0A,u         ldy   #$0003         leau  ,s         pshs  y,x,b,a         lbsr  L0B5D         ldx   <u0050         leay  <$40,x         ldx   $0B,s         lbsr  L0AD2         ldw   $09,sL0621    lbsr  L0AB9         bsr   L05BE         decw           bne   L0621         puls  y,x,b,a         exg   a,b         exg   x,u         lbsr  L0B5D         leas  $07,sL0635    clrb           rts            pshs  u         lda   $01,u         ldx   $06,u         ldy   $08,u         bsr   L064B         puls  y         std   $01,y         stx   $06,yL0648    stu   $0A,y         rts   L064B    tfr   0,u         pshs  u,b,a         bsr   L06CF         cmpa  #$2F         beq   L06C8         lbsr  L06FE         bcs   L06CB         ldu   <u0058         bra   L06BEL065E    pshs  y,x,b,a         pshs  y,x         ldy   ,u         beq   L06B4         ldx   $04,u         pshs  y,x         ldd   #$0004         lbsr  L0AE4         addr  d,x         pshs  y,x         leax  $08,s         ldb   $0D,s         leay  ,s         lbsr  L07A1         leas  $04,s         puls  y,x         leas  $04,s         bcs   L06BC         ldd   #$0006         lbsr  L0AE4         sta   ,s         stb   $07,s         lda   $06,s         beq   L06AB         anda  #$F0         beq   L069F         eora  ,s         anda  #$F0         bne   L06BCL069F    lda   $06,s         anda  #$0F         beq   L06AB         eora  ,s         anda  #$0F         bne   L06BCL06AB    puls  y,x,b,a         abx            clrb           ldb   $01,s         leas  $04,s         rts   L06B4    leas  $04,s         ldd   $08,s         bne   L06BC         stu   $08,sL06BC    puls  y,x,b,aL06BE    leau  -$08,u         cmpu  <u0044         bcc   L065E         ldb   #$DD         cmpx  #$C6EB         coma  L06CB    stb   $01,s         puls  pc,u,b,aL06CF    pshs  yL06D1    lbsr  L0AD2         lbsr  L0AA4         leax  $01,x         cmpa  #$20         beq   L06D1         leax  -$01,x         pshs  b,a,ccL06E1    tfr   y,d         subd  $03,s         asrb           lbsr  L0A8B         puls  pc,y,b,a,cc         ldx   <u0050         leay  <$40,x         ldx   $06,u         bsr   L0701         dec   <u00ED         fcb   $41 A         bcs   L06FC         stx   $06,u         abx   L06FC    stx   $08,uL06FE    rts            pshs  yL0701    lbsr  L0AD3         pshs  y,x         bsr   L0733         cmpa  #$2E         bne   L0715         lbsr  L0AA5         bsr   L0747         lda   #$2E         bcc   L0722L0715    dec   <u0081         ble   L073F         aim   #$8D,<u0013         bsr   L0748         bcs   L0739         clrb  L0721    incb  L0722    tsta           bmi   L072B         bsr   L0734         bsr   L074E         bcc   L0721L072B    andcc #$FE         bra   L0744L072F    stx   $02,s         sty   $04,sL0734    lbra  L0ABBL0737    bsr   L072FL0739    cmpa  #$2C         beq   L0737         cmpa  #$20L073F    beq   L0737         comb           ldb   #$EBL0744    puls  y,x         bra   L06E1L0748    pshs  a         anda  #$7F         bra   L075AL074E    pshs  a         anda  #$7F         cmpa  #$2E         beq   L077B         cmpa  #$2D         beq   L077BL075A    cmpa  #$7A         bhi   L077A         cmpa  #$61         bcc   L077B         cmpa  #$5F         beq   L077B         cmpa  #$5A         bhi   L077A         cmpa  #$41         bcc   L077B         cmpa  #$39         bhi   L077A         cmpa  #$30         bcc   L077B         cmpa  #$24         beq   L077BL077A    coma  L077B    puls  pc,a         ldx   <u0050         leay  <$40,x         ldx   $06,u         pshs  y,x         bra   L0794         ldx   <u0050         leay  <$40,x         ldx   $06,u         pshs  y,x         ldy   <u004CL0794    ldx   $08,u         pshs  y,x         ldd   $01,u         leax  $04,s         leay  ,s         bsr   L07A3         leas  $08,s         rts   L07A3    pshs  u,y,x,b,a         tfr   x,u         pulu  y,x         lbsr  L0AD4         pshu  y,x         ldu   $04,s         pulu  y,x         lbsr  L0AD4         bra   L07BB         ldu   $04,s         pulu  y,xL07BB    lbsr  L0ABB         pshu  y,x         pshs  a         ldu   $03,s         pulu  y,x         lbsr  L0ABB         pshu  y,x         eora  ,s         tst   ,s+         bmi   L07DE         dec   <u005A         beq   L07D9         anda  #$DF         beq   L07B8L07D9    comb           puls  pc,u,y,x,b,a         decb           bne   L07D9         anda  #$5F         bne   L07D9         clrb           puls  pc,u,y,x,b,a         ldd   $01,u         addd  #$00FF         clrb           std   $01,u         ldy   <u004E         leay  >$00ED,y         pshs  b,a         ldx   <u004E         ldb   #$20         abx   L07FC    ldb   $01,uL07FE    cmpr  x,y         bhi   L0808         comb           ldb   #$ED         bra   L083BL0808    lda   ,-y         bne   L07FC         decb           bne   L07FE         sty   ,s         lda   $01,s         lsra           lsra           lsra           lsra           lsra           ldb   $01,s         andb  #$1F         addb  $01,u         addb  #$1F         lsrb           lsrb           lsrb           lsrb           lsrb           ldx   <u004A         lbsr  L09AD         bcs   L083B         ldb   $01,u         lda   #$01L0831    sta   ,y+         decb           bne   L0831         lda   $01,s         std   $0A,u         clrb  L083B    puls  pc,u         ldd   $01,u         beq   L0897         addd  #$00FF         ldb   $0B,u         beq   L084C         comb           ldb   #$D2         rts   L084C    ldb   $0A,u         beq   L0897         ldx   <u004E         abx   L0853    aim   #$FE,,x+         deca           bne   L0853         ldx   <u004C         lde   #$08L085E    ldd   ,x         cmpd  #$333E         beq   L0891         ldu   <u0040         lda   d,u         cmpa  #$01         bne   L0891         tfr   x,d         subd  <u004C         lslb           lslb           lslb           lslb           ldu   <u004E         addr  d,u         ldf   #$10L087E    ldd   ,u++         bne   L0891         decf           bne   L087E         ldd   ,x         ldu   <u0040         sta   d,u         ldd   #$333E         std   ,xL0891    leax  $02,x         dece           bne   L085EL0897    clrb  L0898    rts            lda   #$74         jsr   <u005E         coma           lda   <u0031         bne   L0898         inc   <u0031         ldx   <u0024         beq   L08B5         ldd   <$14,x         beq   L08B5         leax  d,x         bra   L08B8         fcb   $42 B         clr   $0F,s         andb  >$308C         adcb  >$86C1         os9   F$Link            bcs   L0898         lda   #$62         jsr   <u005E         jsr   ,y         bcs   L0898         std   <u0038         stx   <u0036         lda   #$62         jsr   <u005E         ldd   $04,x         ldd   d,x         cmpd  #$4E69         bne   L08DD         ldd   $09,x         jmp   d,xL08DD    ldd   <u0038         bsr   L08EFL08E1    ldx   <u004C         ldb   $0D,x         incb           ldx   <u0040         lbra  L01C6         ldd   $01,u         ldx   $06,uL08EF    leau  d,x         tfr   x,d         anda  #$E0         clrb           pshs  u,b,a         lsra           lsra           lsra           lsra           ldy   <u004C         leay  a,yL0901    ldd   ,x         cmpd  #$87CD         bne   L0935         ldd   $04,x         pshs  x         leax  d,xL090F    lda   ,x+         jsr   <u005E         bpl   L090F         lda   #$20         jsr   <u005E         puls  x         ldd   ,s         subr  d,x         tfr   y,d         os9   ModulF$F          ldw   ,s         leax  w,x         bcc   L0930         cmpb  #$E7         bne   L0935L0930    ldd   $02,x         leax  d,x         cmpx  #$3001         cmpx  $02,s         bcs   L0901         leas  $04,s         clrb           rts            ldb   $02,u         pshs  y,x,b         ldx   <u0040L0945    leay  ,x         ldb   ,sL0949    cmpx  <u0042         bcc   L0966         lda   ,x+         bne   L0945         decb           bne   L0949L0954    tfr   y,d         lda   ,s         stb   ,sL095A    inc   ,y+         deca           bne   L095A         puls  b         clra           std   $01,u         puls  pc,y,xL0966    comb           ldb   #$ED         stb   ,s         puls  pc,y,x,b         ldb   $02,u         pshs  y,x,b         ldx   <u0042L0973    ldb   ,sL0975    cmpx  <u0040         bls   L0966         lda   ,-x         bne   L0973         decb           bne   L0975         tfr   x,y         bra   L0954         ldb   $02,u         beq   L09A7         ldd   <u0042         subd  <u0040         subd  $06,u         bls   L09A7         tsta           bne   L0999         cmpb  $02,u         bcc   L0999         stb   $02,uL0999    ldx   <u0040         ldd   $06,u         leax  d,x         ldb   $02,uL09A1    aim   #$FE,,x+         decb           bne   L09A1L09A7    clrb           rts            ldd   $01,u         ldx   $06,uL09AD    pshs  u,y,x,b,a         lsla           leay  <$40,x         leay  a,y         clra           tfr   d,x         ldu   <u0040         pshs  u,y,x,b,aL09BC    ldd   ,y++         cmpd  #$333E         beq   L09D0         lda   d,u         cmpa  #$01         puls  b,a         bne   L09E5         decd           pshs  b,aL09D0    leax  -$01,x         bne   L09BC         ldx   ,s++         beq   L09EEL09D8    lda   ,u+         bne   L09E0         leax  -$01,x         beq   L09EEL09E0    cmpu  <u0042         bcs   L09D8L09E5    ldb   #$CF         leas  $06,s         stb   $01,s         comb           puls  pc,u,y,x,b,aL09EE    puls  u,y,xL09F0    ldd   ,y++         cmpd  #$333E         bne   L0A04L09F8    lda   ,u+         bne   L09F8         inc   ,-u         tfr   u,d         subd  <u0040         std   -$02,yL0A04    leax  -$01,x         bne   L09F0         ldx   $02,s         oim   #$10,$0C,x         clrb           puls  pc,u,y,x,b,a         ldb   $02,u         ldy   $08,u         bsr   L0A1CL0A17    bcs   L0A1B         sta   $01,uL0A1B    rts   L0A1C    tfr   b,a         suba  #$09         nega           pshs  x,b,a         ldd   #$FFFFL0A26    pshs  b,aL0A28    clra           ldb   $02,s         addb  ,s         stb   $02,s         cmpb  $01,s         bne   L0A45         ldb   #$CF         cmpy  <u004C         bne   L0A3C         ldb   #$EDL0A3C    stb   $03,s         comb           bra   L0A52L0A41    tfr   a,b         addb  $02,sL0A45    lslb           ldx   b,y         cmpx  #$333E         bne   L0A28         inca           cmpa  $03,s         bne   L0A41L0A52    leas  $02,s         puls  pc,x,b,a         ldb   $02,u         ldy   $08,u         bsr   L0A5F         bra   L0A17L0A5F    lda   #$FF         pshs  x,b,a         nega           subb  #$09         negb           bra   L0A26L0A69    ldd   $01,u         ldx   $06,u         ldu   $0A,u         pshs  u,y,x,b,a         leay  <$40,x         lsla           leay  a,y         clra           lslb           tfr   d,w         tfm   u+,y+         oim   #$10,$0C,x         clrb           puls  pc,u,y,x,b,a         ldb   $02,u         ldx   $06,uL0A88    bsr   L0A8E         stx   $06,u         clrb           rts   L0A8E    pshs  b         tfr   b,a         lsla           lsla           lsla           lsla           lsla           clrb           addr  d,x         puls  pc,b         ldx   $06,u         ldy   $08,u         bsr   L0AA7L0AA4    sta   $01,u         rts   L0AA7    lda   $01,y         clrb           pshs  cc         orcc  #$50         sta   >$FFA0         brn   L0AA7         lda   ,x         stb   >$FFA0         brn   L0AA7         puls  pc,cc         lda   $01,y         pshs  b,cc         clrb           orcc  #$50         sta   >$FFA0         lda   ,x+         stb   >$FFA0         puls  b,cc         bra   L0AD5L0ACF    leax  >-$2000,xL0AD3    leay  $02,yL0AD5    cmpx  #$2000         bcc   L0ACF         rts            ldd   $01,u         leau  $06,u         pulu  y,xL0AE1    bsr   L0AE7         std   -$09,u         clrb           rts   L0AE7    pshs  u,y,x         addr  d,x         bsr   L0AD5         ldu   <u004C         clra           ldb   $03,u         tfr   d,u         lda   $01,y         ldb   $03,y         pshs  cc         orcc  #$50         std   >$FFA0         ldd   ,x         stu   >$FFA0         puls  pc,u,y,x,cc         ldd   $08,u         beq   L0B53         addd  $0A,u         cmpa  #$FE         bcc   L0B53         leas  -$10,s         leay  ,s         pshs  u,y         ldx   <u0050         ldf   $06,x         leay  <$40,x         ldx   $01,u         lde   #$08         ldu   ,sL0B26    clrd           bsr   L0AE7         std   ,u++         leax  $02,x         dece           bne   L0B26         ldu   $02,s         lbsr  L0C96         bcs   L0B4F         tfr   b,e         lslb           ldx   <u00A1         ldu   ,s         stu   b,x         ldu   $02,s         tfr   w,d         pshs  a         bsr   L0B57         puls  b         lbsr  L0CB1L0B4F    leas  <$14,s         rts   L0B53    clrb           rts            ldd   $01,uL0B57    ldy   $08,u         beq   L0B53         ldx   $06,u         ldu   $0A,u         pshs  u,y,x,b,a         pshs  y,b,a         tfr   a,b         lbsr  L0C06         leay  a,u         pshs  y,x         ldb   $09,s         ldx   $0E,s         lbsr  L0C06         leay  a,u         pshs  y,x         ldd   #$2000         subd  ,s         pshs  b,a         ldd   #$2000         subd  $06,s         pshs  b,a         ldx   $08,s         leax  >-$6000,x         ldu   $04,s         leau  >-$4000,u         ldy   <u004C         lda   $0B,y         ldb   $0D,y         tfr   d,y         ldd   [<$06,s]         ldw   [<$0D,s]         dec   <u001F         eorb  >$10A6         jmp   -$10,x         cmpa  ,s         bls   L0BB0         ldw   ,sL0BB0    cmpw  $02,s         bls   L0BB8         ldw   $02,sL0BB8    cmpw  #$0100         bls   L0BC2         ldw   #$0100L0BC2    stw   $0C,s         orcc  #$50         std   >$FFA5         tfm   x+,u+         sty   >$FFA5         andcc #$AF         ldd   $0E,s         subd  $0C,s         beq   L0BFF         std   $0E,s         ldd   ,s         subd  $0C,s         bne   L0BEA         lda   #$20         subr  d,x         inc   $0B,s         inc   $0B,sL0BEA    std   ,s         ldd   $02,s         subd  $0C,s         bne   L0BFB         lda   #$20         subr  d,u         inc   $07,s         inc   $07,sL0BFB    std   $02,s         bra   L0B9CL0BFF    leas  <$10,s         clrb           puls  pc,u,y,x,b,a         tfr   u,yL0C07    ldu   <u00A1         lslb           ldu   b,u         tfr   x,d         anda  #$E0         beq   L0C1A         clrb           subr  d,x         lsra           lsra           lsra           lsra  L0C1A    rts            ldb   $02,u         ldx   $06,u         pshs  u,x,a,cc         bsr   L0C07L0C23    ldd   a,u         clra           orcc  #$50         stb   >$FFA0         ldb   ,x         sta   >$FFA0         puls  u,x,a,cc         stb   $01,u         clrb           rts            ldd   $01,u         ldx   $06,u         andcc #$FE         pshs  u,x,b,a,ccL0C3E    bsr   L0C07         ldd   a,u         lda   $01,s         orcc  #$50         stb   >$FFA0         sta   ,x         clrb           stb   >$FFA0         puls  pc,u,x,b,a,cc         ldx   $06,u         ldb   $06,x         bne   L0C5F         bsr   L0C97L0C59    bcs   L0C60         stb   $06,x         bsr   L0C73L0C5F    clrb  L0C60    rts            ldx   $06,uL0C63    ldb   $06,x         beq   L0C5F         clr   $06,x         bra   L0CB2         tim   #$10,$0C,x         beq   L0C60         cmpx  #$AE46L0C73    aim   #$EF,$0C,x         clr   <u003D         andcc #$FE         pshs  u,x,b,a,cc         ldb   $06,x         leau  <$40,x         ldx   <u00A1         lslb           stu   b,x         cmpb  #$02         bhi   L0C90         ldx   #$FFA0         lbsr  L0E89L0C90    puls  pc,u,x,b,a,cc         bsr   L0C97         stb   $02,uL0C96    rts   L0C97    pshs  x         ldb   #$02         ldx   <u0020         lda   b,x         beq   L0CAE         dec   <u005C         cmpb  #$20         bne   L0C9E         comb           ldb   #$EF         puls  pc,x         stb   b,xL0CAE    clra           puls  pc,xL0CB1    ldb   $02,u         pshs  x,b         tstb           beq   L0CBC         ldx   <u0020         clr   b,xL0CBC    puls  pc,x,b         ldx   <u0056         beq   L0CE6         tim   #$40,$0C,x         beq   L0CE6         ldu   $04,x         ldd   $06,u         decd           std   $06,u         bne   L0CE6L0CD1    ldu   $0D,x         bsr   L0CF7         leax  ,u         beq   L0CE4         tim   #$40,$0C,x         beq   L0CE4         ldu   $04,x         ldd   $06,u         beq   L0CD1L0CE4    stx   <u0056L0CE6    tst   <u000A         ble   L0D10         rol   <u000C         ble   L0C8C         negb           beq   L0CF4         oim   #$20,$0C,xL0CF4    clrb           rts            ldx   $06,u         clrb           pshs  u,y,x,b,cc         lda   $0D,x         dec   <u00A7         tim   #$1A,<u0050         ldu   #$0045         bra   L0D14         dec   <u006C         fcb   $4B K         bne   L0D0E         dec   $0B,uL0D0E    cmpa  $0B,uL0D10    bhi   L0D14         leay  ,uL0D14    ldu   $0D,u         bne   L0D08         ldd   $0D,y         stx   $0D,y         std   $0D,x         puls  pc,u,y,x,b,cc         ldx   <u0050         sts   $04,x         lds   <u00CC         ldd   <u00C0         std   <u00E4         ldd   <u00C4         std   <u00E8         jsr   [>$00CE]         bcc   L0D4A         ldx   <u0050         ldb   $06,x         ldx   $04,x         pshs  u,b,a,cc         leau  ,s         lbsr  L0C23         puls  u,b,a,cc         ora   #$50         lbsr  L0C3EL0D4A    orcc  #$50         ldx   <u0050         tst   <u003F         lbne  L0DE1         lda   $0C,x         bita  #$20         bne   L0D71         ldu   #$0045         ldb   #$08         ldu   $0D,u         beq   L0D70         dec   <u00E5         inca           bne   L0D60         ldb   $0D,x         dec   <u00E1         deca           bcs   L0D73         ldu   $04,xL0D71    bra   L0DADL0D73    anda  #$DF         sta   $0C,xL0D77    bsr   L0CFC         ldx   <u004A         stx   <u0050         lds   <u00CC         andcc #$AF         cmpx  #$3CAF         orcc  #$50         lda   #$08         ldx   #$0045L0D8C    leay  ,x         ldx   $0D,y         beq   L0D83         bita  $0C,x         bne   L0D8C         ldd   $0D,x         std   $0D,y         stx   <u0050         lbsr  L0C59         bcs   L0D77         lda   <u0030         sta   <u002F         ldu   $04,x         lda   $0C,x         lbmi  L0E3CL0DAD    bita  #$02         bne   L0E05         lbsr  L0C71         ldb   <$19,x         beq   L0DE3         decb           beq   L0DE0         leas  -$0E,s         leau  ,s         lbsr  L02C8         lda   <$19,x         sta   $02,u         ldd   <$1A,x         beq   L0E05         std   $0C,u         ldd   <$1C,x         std   $0A,u         ldd   $04,x         subd  #$000EL0DD9    std   $04,x         lbsr  L02D7         leas  $0E,sL0DE0    clr   <$19,xL0DE3    oim   #$01,<u003E         ldu   <u00C6         stu   <u00E4         ldu   <u00CA         stu   <u00E8         ldb   $06,x         lslb           ldy   $04,x         lbsr  L0E82         ldb   >$0660         stb   >$0643         incb           stb   >$0645L0E01    ldb   <u003E         bra   L0E52L0E05    oim   #$80,$0C,x         leas  >$0200,x         andcc #$AF         ldb   <$19,x         clr   <$19,x         os9   F$Exit            jmp   [>$0026]         lda   <u00A4         beq   L0E32         clr   <u00A4         jsr   [>$00CE]         inc   <u00A4         lda   #$01         ora   <u0091         sta   <u0091         sta   >$FF91L0E30    bra   L0E36L0E32    jsr   [>$00CE]L0E36    bcc   L0E3B         oim   #$50,,sL0E3B    rti   L0E3C    clra           ldx   <u004A         lbsr  L0C71         orcc  #$50         sta   <u00A4         beq   L0E4F         ora   <u0091         sta   <u0091         sta   >$FF91L0E4F    leas  ,u         rti   L0E52    oim   #$01,<u0091         lda   <u0091         sta   >$FF91         leas  ,y         tstb  L0E5D    bne   L0E68         ldf   #$0E         ldu   #$FEDF         tfm   u+,y+L0E68    rti            oim   #$01,<u0091         ldb   <u0091         stb   >$FF91         jmp   ,u         ldb   #$02         bsr   L0E82         oim   #$01,<u0091         lda   <u0091         sta   >$FF91         inc   <u00A4         rti   L0E82    cmpb  <u003D         beq   L0E9E         stb   <u003D         ldx   #$FFA8         ldu   <u00A1         ldu   b,u         leau  $01,u         lde   #$04L0E94    lda   ,u++         ldb   ,u++         std   ,x++         dece           bne   L0E94L0E9E    rts            ldx   #$00F6         bra   L0EA9         orcc  #$50         ldx   #$00F8L0EA9    clra           sta   >$FF91         tfr   0,dpL0EAF    aim   #$FE,<u0091         lda   <u0091L0EB4    sta   >$FF91         jmp   [,x]         orcc  #$50         ldx   #$00F2         bra   L0EC5         orcc  #$50         ldx   #$00F4L0EC5    ldb   [<$0C,s]         clr   >$FF91         tfr   0,dp         lda   <u0091         bita  #$01         beq   L0EB4         tst   <u00A4         bne   L0EAF         sta   >$FF91         fcb   $31 1         fcb   $8C          emodeom      equ   *         end